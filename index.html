<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MVR Mart</title>

<!-- GA4 -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-DM97TJNN5G"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-DM97TJNN5G');
</script>

<style>
body{margin:0;font-family:Arial;background:#f5f5f5}
header{background:#2e7d32;color:#fff;padding:15px;text-align:center}
.container{padding:15px}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:15px}

.box,.item,.cart{background:#fff;padding:15px;border-radius:10px;box-shadow:0 2px 6px rgba(0,0,0,.1)}
.item img{width:150px;border-radius:6px;cursor:pointer}
.price{color:#2e7d32;font-weight:bold}

button{padding:7px 12px;border:none;border-radius:6px;cursor:pointer}
.primary{background:#1976d2;color:#fff}
.whatsapp{background:#25D366;color:#fff}
button:disabled{background:#ccc;cursor:not-allowed}

.note{background:#e3f2fd;padding:10px;border-radius:6px;font-size:14px}
.free{color:green;font-weight:bold}
.warn{color:#d32f2f;font-weight:bold}

.cart-item{border-bottom:1px dashed #ccc;padding:8px 0}

footer{background:#2e7d32;color:#fff;text-align:center;padding:15px;margin-top:20px}

.timeline{display:flex;justify-content:space-between;margin-bottom:10px}
.stage{flex:1;text-align:center;padding:10px;border-bottom:4px solid #ccc}
.stage.active{border-color:#2e7d32;font-weight:bold}
</style>
</head>

<body>

<header>
<h1>MVR Mart</h1>
<p>Lowest Prices ‚Ä¢ Best Quality ‚Ä¢ Cash on Delivery</p>
<p>‡∞§‡∞ï‡±ç‡∞ï‡±Å‡∞µ ‡∞ß‡∞∞‡∞≤‡±Å ‚Ä¢ ‡∞Æ‡∞Ç‡∞ö‡∞ø ‡∞®‡∞æ‡∞£‡±ç‡∞Ø‡∞§</p>
</header>

<div class="container">

<!-- PINCODE -->
<div class="box">
<b>Please enter pincode to check available items and place order</b><br>
<b>‡∞¶‡∞Ø‡∞ö‡±á‡∞∏‡∞ø ‡∞™‡∞ø‡∞®‡±ç ‡∞ï‡±ã‡∞°‡±ç ‡∞é‡∞Ç‡∞ü‡∞∞‡±ç ‡∞ö‡±á‡∞∏‡∞ø, ‡∞Ö‡∞Ç‡∞¶‡±Å‡∞¨‡∞æ‡∞ü‡±Å‡∞≤‡±ã ‡∞â‡∞®‡±ç‡∞® ‡∞µ‡∞∏‡±ç‡∞§‡±Å‡∞µ‡±Å‡∞≤‡∞®‡±Å ‡∞§‡∞®‡∞ø‡∞ñ‡±Ä ‡∞ö‡±á‡∞∏‡∞ø ‡∞Ü‡∞∞‡±ç‡∞°‡∞∞‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø</b><br><br>
<input type="number" id="pincode" placeholder="Enter Pincode">
<p id="pinMsg"></p>
</div>

<!-- VEHICLE -->
<div class="box">
<div class="timeline">
  <div class="stage" id="stage1">Collecting Orders</div>
  <div class="stage" id="stage2">Out for Delivery</div>
  <div class="stage" id="stage3">Delivered</div>
</div>
<div id="stageMsg"></div>
</div>

<!-- ITEMS -->
<div class="grid">
<div class="item">
<h3>Sugar / ‡∞ö‡∞ï‡±ç‡∞ï‡±Ü‡∞∞</h3>
<img src="images/Sugar.jpeg" onclick="openImg(this.src)">
<p class="price">‚Çπ40 per kg</p>
<select id="sugarQty"><option>1</option><option>2</option><option>3</option></select><br><br>
<button class="primary addBtn" onclick="addItem('Sugar/‡∞ö‡∞ï‡±ç‡∞ï‡±Ü‡∞∞',40,sugarQty.value)" disabled>Add to Cart</button>
</div>

<div class="item">
<h3>Reusable Diapers / ‡∞™‡±Å‡∞®‡∞∞‡±ç‡∞µ‡∞ø‡∞®‡∞ø‡∞Ø‡±ã‡∞ó ‡∞°‡∞Ø‡∞æ‡∞™‡∞∞‡±ç‡∞∏‡±ç</h3>
<img src="images/ms_6y0zi_512_546541773.jpg" onclick="openImg(this.src)">
<p class="price">‚Çπ499 per set</p>
<select id="diaperQty"><option>1</option><option>2</option><option>3</option></select><br><br>
<button class="primary addBtn" onclick="addItem('Reusable Diapers/‡∞™‡±Å‡∞®‡∞∞‡±ç‡∞µ‡∞ø‡∞®‡∞ø‡∞Ø‡±ã‡∞ó ‡∞°‡∞Ø‡∞æ‡∞™‡∞∞‡±ç‡∞∏‡±ç',499,diaperQty.value)" disabled>Add to Cart</button>
</div>
  
<div class="item">
<h3>Diapers / ‡∞°‡∞Ø‡∞æ‡∞™‡∞∞‡±ç‡∞∏‡±ç</h3>
<img src="images/ms_6y0zi_512_546541773.jpg" onclick="openImg(this.src)">
<p class="price">‚Çπ899 per set</p>
<select id="diaperQty"><option>1</option><option>2</option><option>3</option></select><br><br>
<button class="primary addBtn" onclick="addItem('Reusable Diapers/‡∞™‡±Å‡∞®‡∞∞‡±ç‡∞µ‡∞ø‡∞®‡∞ø‡∞Ø‡±ã‡∞ó ‡∞°‡∞Ø‡∞æ‡∞™‡∞∞‡±ç‡∞∏‡±ç',499,diaperQty.value)" disabled>Add to Cart</button>
</div>
  

<div class="item">
<h3>Men Shirt / ‡∞™‡±Å‡∞∞‡±Å‡∞∑‡±Å‡∞≤ ‡∞ö‡±ä‡∞ï‡±ç‡∞ï‡∞æ</h3>
<img src="images/Shirt.jpg" onclick="openImg(this.src)">
<p class="price">‚Çπ799 per shirt</p>
<select id="shirtQty"><option>1</option><option>2</option><option>3</option></select><br><br>
<button class="primary addBtn" onclick="addItem('Men Shirt/‡∞™‡±Å‡∞∞‡±Å‡∞∑‡±Å‡∞≤ ‡∞ö‡±ä‡∞ï‡±ç‡∞ï‡∞æ',799,shirtQty.value)" disabled>Add to Cart</button>
</div>

<div class="item">
<h3>More Items Coming Soon üöß</h3>
<p>‡∞Æ‡∞∞‡∞ø‡∞®‡±ç‡∞®‡∞ø ‡∞µ‡∞∏‡±ç‡∞§‡±Å‡∞µ‡±Å‡∞≤‡±Å ‡∞§‡±ç‡∞µ‡∞∞‡∞≤‡±ã</p>
</div>
</div>

<!-- CART -->
<div class="cart">
<h3>üõí Cart</h3>
<div id="cartItems">No items</div>

<p>Subtotal: ‚Çπ<span id="subtotal">0</span></p>
<p>Delivery Charge: ‚Çπ<span id="deliveryCharge">0</span></p>
<p id="deliveryMsg"></p>
<p><b>Total: ‚Çπ<span id="total">0</span></b></p>

<div class="note">
Thank you for selecting items. Please place order via WhatsApp. Cash on Delivery available.<br><br>
‡∞Æ‡±Ä‡∞∞‡±Å ‡∞µ‡∞∏‡±ç‡∞§‡±Å‡∞µ‡±Å‡∞≤‡±Å ‡∞é‡∞Ç‡∞™‡∞ø‡∞ï ‡∞ö‡±á‡∞∏‡∞ø‡∞®‡∞Ç‡∞¶‡±Å‡∞ï‡±Å ‡∞ß‡∞®‡±ç‡∞Ø‡∞µ‡∞æ‡∞¶‡∞æ‡∞≤‡±Å. WhatsApp ‡∞¶‡±ç‡∞µ‡∞æ‡∞∞‡∞æ ‡∞Ü‡∞∞‡±ç‡∞°‡∞∞‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø.
</div>

<button id="waBtn" class="whatsapp" onclick="shareWA()" disabled>Place Order on WhatsApp</button>
</div>

</div>

<footer>
<p><b>Privacy Note:</b> Orders are placed via WhatsApp only. No online payments are collected on this website.</p>
<p>¬© 2025 MVR Mart</p>
</footer>

<script>
const DELIVERY_CHARGE = 40;
let cart = JSON.parse(localStorage.getItem("cart")) || [];
let serviceable = false;

function addItem(name, price, qty) {
  if (!serviceable) return;
  qty = parseInt(qty);
  let item = cart.find(i => i.name === name);
  item ? item.qty += qty : cart.push({ name, price, qty });
  render();
}

function changeQty(i, d) {
  if (!serviceable) return;
  cart[i].qty += d;
  if (cart[i].qty <= 0) cart.splice(i, 1);
  render();
}

function render() {
  let html = "", sub = 0;
  cart.forEach((i, n) => {
    let amt = i.price * i.qty;
    sub += amt;
    html += `
      <div class="cart-item">
        <b>${i.name}</b><br>
        ‚Çπ${i.price} √ó ${i.qty} = ‚Çπ${amt}<br>
        <button onclick="changeQty(${n},1)" ${!serviceable?"disabled":""}>+</button>
        <button onclick="changeQty(${n},-1)" ${!serviceable?"disabled":""}>-</button>
      </div>`;
  });

  cartItems.innerHTML = html || "No items";
  subtotal.innerText = sub;

  let delivery = 0;
  if (sub > 0 && sub < 1500) {
    delivery = DELIVERY_CHARGE;
    deliveryMsg.innerHTML = `<span class="warn">Add ‚Çπ${1500-sub} more for FREE delivery</span>`;
  } else if (sub >= 1500) {
    deliveryMsg.innerHTML = `<span class="free">üéâ Free Delivery</span>`;
  } else {
    deliveryMsg.innerHTML = "";
  }

  deliveryCharge.innerText = delivery;
  total.innerText = sub + delivery;

  localStorage.setItem("cart", JSON.stringify(cart));
}

pincode.oninput = () => {
  serviceable = pincode.value === "500086";
  pinMsg.innerHTML = serviceable
    ? "<span class='free'>Service available</span>"
    : "<span class='warn'>We are yet to serve in this area</span>";

  document.querySelectorAll(".addBtn").forEach(b => b.disabled = !serviceable);
  waBtn.disabled = !serviceable;
  render();
};

function shareWA() {
  if (!serviceable || cart.length === 0) return;
  let msg = `Order from MVR Market%0APincode: ${pincode.value}%0A`;
  cart.forEach((i,n)=>msg+=`${n+1}. ${i.name} √ó ${i.qty} = ‚Çπ${i.price*i.qty}%0A`);
  window.open("https://wa.me/919876543210?text="+msg);
}

function updateTruck(){
  let d=new Date(),day=d.getDay(),hr=d.getHours();
  stage1.classList.remove("active");stage2.classList.remove("active");stage3.classList.remove("active");
  if((day>=1&&day<=5)||(day==6&&hr<13)){stage1.classList.add("active");stageMsg.innerText="üöö Collecting orders. Order by Saturday afternoon.";}
  else if((day==6&&hr>=13)||(day==0&&hr<22)){stage2.classList.add("active");stageMsg.innerText="üöõ Out for delivery. Orders still accepted.";}
  else{stage3.classList.add("active");stageMsg.innerText="üöö All items delivered.";}
}

updateTruck();
render();
function openImg(src){window.open(src);}
</script>

</body>
</html>                                          
